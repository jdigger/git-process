#!/usr/bin/env ruby

require "rubygems"
require "bundler/setup"

require 'logger'
require 'backports'
require_relative '../lib/git-process/git-pull-request-options'
require_relative '../lib/git-process/git-process'

options = Git::Process::PullRequestOptions.new(File.basename(__FILE__), ARGV)

gp = Git::Process.new('.', :log_level => options.log_level)

begin
  # gp.pull_request('jdigger/git-process', 'master', 'pull-request', 'simple test', 'simple body', :user => options.user, :password => options.password)
  gp.pull_request(nil, nil, nil, nil, nil, :user => options.user, :password => options.password)
rescue Git::Process::GitProcessError => exp
  puts exp.message
  exit -1
end
